# Okta（オクタ）詳細

## Oktaとは
企業向けのID管理・認証を提供する外部サービス（IDaaS: Identity as a Service）。<br>
自社で認証システムを構築・運用する代わりに、Oktaを使うことで高度な認証機能を簡単に導入できる。<br>

### 2つの製品ライン
Oktaには主に2つの製品があり、用途が異なる：<br>

1. **Okta Workforce Identity（従業員向け）** ← このページで主に説明するのはこちら<br>
   - 企業の社員・従業員が社内システムにアクセスするための認証<br>
   - 例：社員がSalesforce、Slack、Google Workspaceにログイン<br>

2. **Okta Customer Identity（旧Auth0）（エンドユーザー向け）**<br>
   - 企業が提供するアプリ・サービスの一般ユーザー（顧客）向け認証<br>
   - 例：ECサイトの会員登録、「Googleでログイン」機能の実装<br>

**一般的に「Okta」と言えば従業員向けを指すことが多い。**<br>

---

## Oktaの役割：認証の司令塔

Oktaは「**認証の司令塔**」として機能する。<br>
ユーザーがログインしようとすると：<br>

1. **各アプリケーション側はパスワードを保存しない**<br>
2. **Oktaにログイン情報を問い合わせる**<br>
3. **Oktaが本人確認をして、OKなら「認証済み」の証明書を発行**<br>
4. **アプリはその証明書を信じてユーザーを受け入れる**<br>

---

## パスワードの保管場所

### Oktaを利用した場合
- **パスワードはOktaにのみ保存される**<br>
- 各アプリケーション（Salesforce、Slack、社内システムなど）はパスワードを持たない<br>
- アプリ側は「Oktaが認証した」という情報だけを受け取る<br>

### メリット
- パスワード変更は1か所（Okta）だけで完結<br>
- 各アプリがパスワードを管理しないため、情報漏洩のリスクが分散される<br>
- 退職時などもOktaのアカウントを停止するだけで全サービスのアクセスを遮断できる<br>

---

## SSO（シングルサインオン）認証フロー

Oktaを使ったSAML認証の流れ：<br>

```
[ユーザー] → [アプリA（例: Salesforce）にアクセス]
     ↓
[アプリA] → 「あなた誰？Oktaで確認して」
     ↓
[ユーザー] → [Oktaログイン画面でID・パスワード入力]
     ↓
[Okta] → 「本人確認OK！」→ SAMLトークン（認証済み証明書）を発行
     ↓
[アプリA] → SAMLトークンを受け取り → ユーザーをログイン状態にする
```

**この後、別のアプリB（例: Slack）にアクセスすると：**<br>
```
[ユーザー] → [アプリBにアクセス]
     ↓
[アプリB] → 「Oktaで確認して」
     ↓
[Okta] → 「さっきログインしたばかりだからOK！」→ すぐにSAMLトークン発行
     ↓
[アプリB] → ログイン完了（再入力不要！）
```

**ポイント：**<br>
- 最初の1回だけOktaでログインすれば、連携している全てのアプリに自動ログインできる<br>
- 各アプリはパスワードを知らないが、Oktaの「認証済み証明書」を信じてアクセスを許可する<br>

---

## Oktaなしの場合 vs Oktaありの場合

| 項目 | **Oktaなし（従来）** | **Oktaあり** |
|------|-------------------|------------|
| **パスワード保存場所** | 各アプリごとに別々に保存 | Oktaだけに保存 |
| **ログイン回数** | アプリごとに毎回ログイン | 1回のログインで全アプリOK（SSO） |
| **パスワード変更** | 各アプリで個別に変更必要 | Oktaで1回変更するだけ |
| **退職者アカウント削除** | 各アプリで1つずつ削除 | Oktaで無効化すれば全て遮断 |
| **セキュリティリスク** | 複数箇所に情報があるため分散 | 一元管理でリスク集約（ただしOktaが重要に） |

---

## 実際の使い方（社員目線）

### 毎朝の業務開始時
1. **ブラウザでOktaのポータル画面を開く**<br>
   ```
   例: https://your-company.okta.com
   ```

2. **ID・パスワードでログイン（+ MFAで二段階認証）**<br>
   - スマホアプリで認証コードを入力<br>
   - または指紋認証など<br>

3. **ダッシュボードに会社で使うアプリのアイコンが並んでいる**<br>
   ```
   [Salesforce] [Slack] [Google Workspace] [社内システム]
   ```

4. **アイコンをクリックするだけで各アプリに自動ログイン！**<br>
   - パスワード再入力は不要<br>
   - ブックマークのように簡単にアクセス<br>

---

## 主な用途

### 1. シングルサインオン（SSO）
1回のログインで複数のアプリケーション（Google Workspace、Salesforce、Slackなど）にアクセス可能。<br>

### 2. 多要素認証（MFA）
SMSやアプリでの二段階認証を簡単に導入できる。<br>
パスワード漏洩があっても二段階認証で不正アクセスを防げる。<br>

### 3. ユーザー管理の一元化
社員の入退社時のアカウント管理を効率化。<br>
- 新入社員：Oktaアカウント1つ作れば全サービスにアクセス権付与<br>
- 退職者：Oktaで無効化すれば全サービスから即座に遮断<br>

### 4. セキュリティ強化
- 不正ログイン検知（普段と違う場所からのアクセスをブロック）<br>
- アクセス制御（部署や役職に応じて利用可能なアプリを制限）<br>
- ログ管理（誰がいつどのアプリにアクセスしたか記録）<br>

---

## メリット

### 開発・運用面
- 認証システムを自前で開発・保守する必要がない<br>
- セキュリティ更新やバグ修正はOktaが対応<br>

### ユーザー体験面
- パスワードを覚えるのは1つだけ<br>
- 毎回ログインする手間が大幅に削減<br>

### セキュリティ面
- 企業で使われる主要なSaaSとの連携が簡単<br>
- セキュリティ基準（SOC 2、ISO 27001など）に準拠済み<br>
- 不正アクセス検知などの高度な機能を簡単に導入<br>

---

## 競合サービス

- **Auth0（オースゼロ）**: 開発者向けに柔軟なカスタマイズが可能<br>
- **Azure AD（Azure Active Directory）**: Microsoft製品との親和性が高い<br>
- **Google Workspace**: Googleサービス中心の企業に最適<br>
- **OneLogin**: Oktaと同様の企業向けIDaaS<br>

---

## 実務での注意点

### Oktaダウン時のリスク
Oktaがダウンすると、連携している全てのサービスにログインできなくなる可能性がある。<br>
- 対策：重要なシステムには緊急用の管理者アカウント（Okta経由ではない）を用意しておく<br>

### コスト
従業員数×月額料金がかかるため、小規模企業では負担になる場合も。<br>
- 例：Okta Workforce Identity（ユーザー1人あたり月額数ドル〜）<br>

### 導入の手間
各アプリとOktaの連携設定（SAML設定など）が必要。<br>
IT部門がしっかりと設定を管理する必要がある。<br>

---

## まとめ

- **Okta = 認証の司令塔**として、パスワード管理を一元化<br>
- **SSO**で1回のログインで複数サービスにアクセス可能<br>
- **パスワードはOktaにのみ保存**され、各アプリは持たない<br>
- 企業のセキュリティ強化と業務効率化に貢献する重要なサービス<br>

企業で「Oktaでログインしてください」と言われたら、このような仕組みが裏で動いている。<br>
